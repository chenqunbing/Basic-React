<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script src="https://cdn.bootcss.com/react/15.4.2/react.min.js"></script>
		<script src="https://cdn.bootcss.com/react/15.4.2/react-dom.min.js"></script>
		<script src="../js/browser.min.js"></script>
	</head>
	<body>
		<div id="example"></div>
		<script type="text/babel">
//			function tick(){
//				const element=(
//					<div>
//						<h1>Hello world!</h1>
//						<h2>It is {new Date().toLocaleTimeString()}</h2>
//					</div>
//				)
//				ReactDOM.render(element,document.getElementById("example"))
//			}
//			setInterval(tick,1000);
			
//			function Clock(props){
//				return (
//					<div>
//						<h1>Hello world!</h1>
//						<h2>It is {props.date.toLocaleTimeString()}</h2>
//					</div>
//				)
//			}
//			function click(){
//				ReactDOM.render(<Clock date={new Date} />,document.getElementById("example"));
//			}
//			setInterval(click,1000);

			//将函数封装为类
			class Clock extends React.Component{
				constructor(props){
					super(props);
					this.state={date:new Date()};
				}
				componentDidMount(){
					this.timerID=setInterval(()=>this.tick(),1000);
//					this.timerID=setInterval(function(){
//						this.tick()
//					}.bind(this),1000);
				}
				componentWillUnMount(){
					clearInterval(this.timerID);
				}
				tick(){
					this.setState({date:new Date()})
				}
				render(){
					return (
						<div>
							<h1>Hello world!</h1>
							<h2>It is {this.state.date.toLocaleTimeString()}</h2>
						</div>
					)
				}
			}
			
			ReactDOM.render(<Clock />,document.getElementById("example"));
		</script>
	</body>
</html>
